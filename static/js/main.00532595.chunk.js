(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{103:function(t,e,a){},125:function(t,e,a){},128:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),o=a(8),c=a.n(o);a(103),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l,r,s=a(25),u=a(181),d=a(78),f=a.n(d).a.create(Object(s.a)({},{baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"42c688ff-b242-4cda-ac99-6e02679c3ff4"}})),m=function(t,e){return f.put("todo-lists/".concat(t),{title:e})},p=function(t){return f.delete("todo-lists/".concat(t))},b=function(t){return f.post("todo-lists",{title:t})},g=function(){return f.get("todo-lists")},h=function(t){return f.post("auth/login",t)},E=function(){return f.delete("auth/login")},k=function(){return f.get("auth/me")},v=function(t,e){t.messages.length?e(x({error:t.messages[0]})):e(x({error:"Some error occurred"})),e(S({status:"failed"}))},C=function(t,e){e(x({error:t.message?t.message:"Some error occurred"})),e(S({status:"failed"}))},j=a(26),y=Object(j.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),O=y.reducer,T=y.actions.setIsLoggedInAC,I=Object(j.b)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setAppInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),A=I.reducer,w=I.actions,S=w.setAppStatusAC,x=w.setAppErrorAC,L=w.setAppInitializedAC,P=(Object(u.a)(),Object(u.a)(),Object(j.b)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));a>-1&&t.splice(a,1)},addTodolistAC:function(t,e){t.unshift(Object(s.a)(Object(s.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].title=e.payload.title},changeTodolistFilterAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.todolistId}));t[a].filter=e.payload.filter},changeTodolistEntityStatusAC:function(t,e){var a=t.findIndex((function(t){return t.id===e.payload.id}));t[a].entityStatus=e.payload.status},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{filter:"all",entityStatus:"idle"})}))}}})),F=P.reducer,z=P.actions,N=z.removeTodolistAC,D=z.addTodolistAC,M=z.changeTodolistTitleAC,R=z.changeTodolistFilterAC,q=z.changeTodolistEntityStatusAC,B=z.setTodolistsAC,H=function(t){return f.get("todo-lists/".concat(t,"/tasks"))},U=function(t,e){return f.delete("todo-lists/".concat(t,"/tasks/").concat(e))},J=function(t,e){return f.post("todo-lists/".concat(t,"/tasks"),{title:e})},K=function(t,e,a){return f.put("todo-lists/".concat(t,"/tasks/").concat(e),a)};!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(l||(l={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(r||(r={}));var W,V=Object(j.b)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&a.splice(n,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var a=t[e.payload.todolistId],n=a.findIndex((function(t){return t.id===e.payload.taskId}));n>-1&&(a[n]=Object(s.a)(Object(s.a)({},a[n]),e.payload.model))},setTasksAC:function(t,e){t[e.payload.todolistId]=e.payload.tasks}},extraReducers:function(t){t.addCase(D,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(N,(function(t,e){delete t[e.payload.todolistId]})),t.addCase(B,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))}))}}),Y=V.reducer,$=V.actions,_=$.removeTaskAC,G=$.addTaskAC,Q=$.updateTaskAC,X=$.setTasksAC;!function(t){t[t.success=0]="success",t[t.failed=1]="failed",t[t.captcha=2]="captcha"}(W||(W={}));var Z=function(t,e,a){return function(n,i){n(S({status:"loading"})),n(q({id:a,status:"loading"}));var o=i().tasks[a].find((function(e){return e.id===t}));if(o){var c=Object(s.a)({deadline:o.deadline,description:o.description,priority:r.Low,startDate:o.startDate,title:o.title,status:o.status},e);K(a,t,c).then((function(i){i.data.resultCode===W.success?(n(Q({taskId:t,model:e,todolistId:a})),n(q({id:a,status:"succeeded"})),n(S({status:"succeeded"}))):v(i.data,n)})).catch((function(t){C(t,n)}))}else alert("task not found in the state")}},tt=a(51),et=a(44),at=Object(tt.b)({tasks:Y,todolists:F,app:A,auth:O}),nt=Object(j.a)({reducer:at,middleware:function(t){return t().prepend(et.a)}});window.store=nt;var it=a(13),ot=(a(125),a(173)),ct=a(174),lt=a(175),rt=a(166),st=a(130),ut=a(169),dt=a(177),ft=a(178),mt=a(176),pt=a(170),bt=a(129),gt=a(42),ht=a(179),Et=a(167),kt=i.a.memo((function(t){var e=t.addItem,a=t.disabled,o=void 0!==a&&a,c=Object(n.useState)(""),l=Object(gt.a)(c,2),r=l[0],s=l[1],u=Object(n.useState)(null),d=Object(gt.a)(u,2),f=d[0],m=d[1],p=function(){""!==r.trim()?(e(r.trim()),s("")):m("Title is required")};return i.a.createElement("div",null,i.a.createElement(ht.a,{variant:"outlined",error:!!f,value:r,onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==f&&m(null),"Enter"===t.key&&p()},label:"Title",helperText:f,disabled:o}),i.a.createElement(rt.a,{color:"primary",onClick:p,disabled:o},i.a.createElement(Et.a,null)))})),vt=a(87),Ct=i.a.memo((function(t){var e=Object(n.useState)(!1),a=Object(gt.a)(e,2),o=a[0],c=a[1],l=Object(n.useState)(""),r=Object(gt.a)(l,2),s=r[0],u=r[1];return o?i.a.createElement(ht.a,{value:s,onChange:function(t){u(t.currentTarget.value)},autoFocus:!0,onBlur:function(){c(!1),t.onChange(s)}}):i.a.createElement("span",{onDoubleClick:function(){!t.disabled&&c(!0),u(t.title)}},t.title)})),jt=a(168),yt=a(182),Ot=i.a.memo((function(t){var e=t.task,a=t.changeTaskStatus,o=t.changeTaskTitle,c=t.removeTask,r=t.todolistId,s=Object(n.useCallback)((function(){return c(e.id,r)}),[c,e.id,r]),u=Object(n.useCallback)((function(t){var n=t.currentTarget.checked;a(e.id,n?l.Completed:l.New,r)}),[a,e.id,r]),d=Object(n.useCallback)((function(t){o(e.id,t,r)}),[o,e.id,r]);return i.a.createElement("div",{key:e.id,className:e.status===l.Completed?"is-done":""},i.a.createElement(yt.a,{color:"primary",onChange:u,checked:e.status===l.Completed}),i.a.createElement(Ct,{title:e.title,onChange:d,disabled:"loading"===t.entityStatus}),i.a.createElement(rt.a,{onClick:s,disabled:"loading"===t.entityStatus},i.a.createElement(jt.a,null)))})),Tt=i.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,o=Object(vt.a)(t,["demo"]),c=Object(it.b)();Object(n.useEffect)((function(){var t;a||c((t=o.id,function(e){e(S({status:"loading"})),H(t).then((function(a){var n=a.data.items;e(X({tasks:n,todolistId:t})),e(S({status:"succeeded"}))})).catch((function(t){C(t,e)}))}))}),[]);var r=o.id,s=o.changeFilter,u=o.addTask,d=o.changeTodolistTitle,f=Object(n.useCallback)((function(t){return d(r,t)}),[d,r]),m=Object(n.useCallback)((function(t){return u(t,r)}),[u,r]),p=Object(n.useCallback)((function(){s("all",r)}),[s,r]),b=Object(n.useCallback)((function(){s("active",r)}),[s,r]),g=Object(n.useCallback)((function(){s("completed",r)}),[s,r]),h=o.tasks;return"active"===o.filter&&(h=o.tasks.filter((function(t){return t.status===l.New}))),"completed"===o.filter&&(h=o.tasks.filter((function(t){return t.status===l.Completed}))),i.a.createElement("div",null,i.a.createElement("h3",null,i.a.createElement(Ct,{title:o.title,onChange:f,disabled:"loading"===o.entityStatus}),i.a.createElement(rt.a,{onClick:function(){return o.removeTodolist(o.id)},disabled:"loading"===o.entityStatus},i.a.createElement(jt.a,null))),i.a.createElement(kt,{addItem:m,disabled:"loading"===o.entityStatus}),i.a.createElement("div",null,h.map((function(t){return i.a.createElement(Ot,{task:t,changeTaskStatus:o.changeTaskStatus,changeTaskTitle:o.changeTaskTitle,removeTask:o.removeTask,todolistId:o.id,key:t.id,entityStatus:o.entityStatus})}))),i.a.createElement("div",{style:{paddingTop:"10px"}},i.a.createElement(ut.a,{variant:"all"===o.filter?"outlined":"text",onClick:p,color:"default"},"All"),i.a.createElement(ut.a,{variant:"active"===o.filter?"outlined":"text",onClick:b,color:"primary"},"Active"),i.a.createElement(ut.a,{variant:"completed"===o.filter?"outlined":"text",onClick:g,color:"secondary"},"Completed")))})),It=a(12),At=function(t){var e=t.demo,a=void 0!==e&&e,o=Object(it.c)((function(t){return t.todolists})),c=Object(it.c)((function(t){return t.tasks})),l=Object(it.c)((function(t){return t.app.status})),r=Object(it.c)((function(t){return t.auth.isLoggedIn})),s=Object(it.b)();Object(n.useEffect)((function(){!a&&r&&s((function(t){t(S({status:"loading"})),g().then((function(e){t(B({todolists:e.data})),t(S({status:"succeeded"}))})).catch((function(e){C(e,t)}))}))}),[]);var u=Object(n.useCallback)((function(t,e){s(function(t,e){return function(a){a(S({status:"loading"})),a(q({id:e,status:"loading"})),J(e,t).then((function(t){if(t.data.resultCode===W.success){var n=t.data.data.item;a(G({task:n})),a(q({id:e,status:"succeeded"})),a(S({status:"succeeded"}))}else v(t.data,a)})).catch((function(t){C(t,a)}))}}(t,e))}),[s]),d=Object(n.useCallback)((function(t,e,a){s(Z(t,{status:e},a))}),[s]),f=Object(n.useCallback)((function(t,e,a){s(Z(t,{title:e},a))}),[s]),h=Object(n.useCallback)((function(t,e){s(R({filter:t,todolistId:e}))}),[s]),E=Object(n.useCallback)((function(t,e){s(function(t,e){return function(a){a(S({status:"loading"})),a(q({id:e,status:"loading"})),U(e,t).then((function(n){n.data.resultCode===W.success?(a(_({taskId:t,todolistId:e})),a(q({id:e,status:"succeeded"})),a(S({status:"succeeded"}))):v(n.data,a)})).catch((function(t){C(t,a)}))}}(t,e))}),[s]),k=Object(n.useCallback)((function(t){s(function(t){return function(e){e(S({status:"loading"})),b(t).then((function(t){0===t.data.resultCode?(e(D({todolist:t.data.data.item})),e(S({status:"succeeded"}))):v(t.data,e)})).catch((function(t){C(t,e)}))}}(t))}),[s]),j=Object(n.useCallback)((function(t,e){var a,n;s((a=t,n=e,function(t){t(S({status:"loading"})),m(a,n).then((function(e){0===e.data.resultCode?(t(M({todolistId:a,title:n})),t(S({status:"succeeded"}))):v(e.data,t)})).catch((function(e){C(e,t)}))}))}),[s]),y=Object(n.useCallback)((function(t){s(function(t){return function(e){e(S({status:"loading"})),e(q({id:t,status:"loading"})),p(t).then((function(a){0===a.data.resultCode?(e(N({todolistId:t})),e(S({status:"succeeded"}))):v(a.data,e)})).catch((function(t){C(t,e)}))}}(t))}),[s]);return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(pt.a,{container:!0,style:{padding:"15px"}},i.a.createElement(kt,{addItem:k,disabled:"loading"===l})),i.a.createElement(pt.a,{container:!0,spacing:5},o.map((function(t){var e=c[t.id];return i.a.createElement(pt.a,{item:!0,key:t.id},i.a.createElement(bt.a,{elevation:10,style:{padding:"15px",borderRadius:"10px"}},i.a.createElement(Tt,{id:t.id,title:t.title,filter:t.filter,entityStatus:t.entityStatus,tasks:e,removeTask:E,changeFilter:h,addTask:u,changeTaskStatus:d,removeTodolist:y,changeTaskTitle:f,changeTodolistTitle:j,demo:a})))})))):i.a.createElement(It.a,{to:"/login"})},wt=a(184),St=a(180);function xt(t){return i.a.createElement(St.a,Object.assign({elevation:6,variant:"filled"},t))}function Lt(){var t=Object(it.c)((function(t){return t.app.error})),e=Object(it.b)(),a=function(t,a){"clickaway"!==a&&e(x({error:null}))},n=null!==t;return i.a.createElement(wt.a,{open:n,autoHideDuration:6e3,onClose:a},i.a.createElement(xt,{onClose:a,severity:"error"},t))}var Pt=a(50),Ft=a(185),zt=a(165),Nt=a(171),Dt=a(172),Mt=a(86),Rt=function(){var t=Object(it.b)(),e=Object(it.c)((function(t){return t.auth.isLoggedIn})),a=Object(Mt.a)({validate:function(t){return t.email?t.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var a;t((a=e,function(t){t(S({status:"loading"})),h(a).then((function(e){0===e.data.resultCode?(t(T({value:!0})),t(S({status:"succeeded"}))):v(e.data,t)})).catch((function(e){C(e,t)}))}))}});return e?i.a.createElement(It.a,{to:"/"}):i.a.createElement(pt.a,{container:!0,justify:"center"},i.a.createElement(pt.a,{item:!0,xs:4},i.a.createElement("form",{onSubmit:a.handleSubmit},i.a.createElement(Ft.a,null,i.a.createElement(zt.a,null,i.a.createElement("p",null,"To log in get registered ",i.a.createElement("a",{href:"https://social-network.samuraijs.com/",target:"_blank"},"here")),i.a.createElement("p",null,"or use common test account credentials:"),i.a.createElement("p",null," Email: free@samuraijs.com"),i.a.createElement("p",null,"Password: free")),i.a.createElement(Nt.a,null,i.a.createElement(ht.a,Object.assign({label:"Email",margin:"normal"},a.getFieldProps("email"))),a.errors.email?i.a.createElement("div",null,a.errors.email):null,i.a.createElement(ht.a,Object.assign({type:"password",label:"Password",margin:"normal"},a.getFieldProps("password"))),a.errors.password?i.a.createElement("div",null,a.errors.password):null,i.a.createElement(Dt.a,{label:"Remember me",control:i.a.createElement(yt.a,Object.assign({},a.getFieldProps("rememberMe"),{checked:a.values.rememberMe}))}),i.a.createElement(ut.a,{type:"submit",variant:"contained",color:"primary"},"Login"))))))},qt=i.a.memo((function(t){var e=t.demo,a=void 0!==e&&e,o=Object(it.c)((function(t){return t.app.status})),c=Object(it.c)((function(t){return t.app.isInitialized})),l=Object(it.c)((function(t){return t.auth.isLoggedIn})),r=Object(it.b)();Object(n.useEffect)((function(){r((function(t){k().then((function(e){0===e.data.resultCode&&t(T({value:!0})),t(L({isInitialized:!0}))}))}))}),[]);var s=Object(n.useCallback)((function(){r((function(t){t(S({status:"loading"})),E().then((function(e){0===e.data.resultCode?(t(T({value:!1})),t(S({status:"succeeded"}))):v(e.data,t)})).catch((function(e){C(e,t)}))}))}),[]);return c?i.a.createElement(Pt.a,null,i.a.createElement("div",{className:"App"},i.a.createElement(ct.a,{position:"static"},i.a.createElement(lt.a,null,i.a.createElement(rt.a,{edge:"start",color:"inherit","aria-label":"menu"},i.a.createElement(mt.a,null)),i.a.createElement(st.a,{variant:"h6"},"News"),l&&i.a.createElement(ut.a,{color:"inherit",onClick:s},"Log out"))),"loading"===o&&i.a.createElement(dt.a,{color:"secondary"}),i.a.createElement(ft.a,{fixed:!0},i.a.createElement(It.d,null,i.a.createElement(It.b,{exact:!0,path:"/",render:function(){return i.a.createElement(At,{demo:a})}}),i.a.createElement(It.b,{path:"/login",render:function(){return i.a.createElement(Rt,null)}}),i.a.createElement(It.b,{path:"/404",render:function(){return i.a.createElement("h1",null,"404. Page not found")}}),i.a.createElement(It.a,{from:"*",to:"/404"}))),i.a.createElement(Lt,null))):i.a.createElement("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"}},i.a.createElement(ot.a,null))}));c.a.render(i.a.createElement(it.a,{store:nt},i.a.createElement(qt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},98:function(t,e,a){t.exports=a(128)}},[[98,1,2]]]);
//# sourceMappingURL=main.00532595.chunk.js.map